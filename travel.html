<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Å‡∏á‡∏•‡πâ‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .container {
            text-align: center;
            padding: 20px;
            max-width: 800px;
            width: 100%;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 10px rgba(255,255,255,0.1); }
            to { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.3); }
        }

        .wheel-container {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 0 auto 3rem auto;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0,0,0,0.5), inset 0 0 20px rgba(255,255,255,0.1);
            transition: transform 4s cubic-bezier(0.23, 1, 0.32, 1);
            background: conic-gradient(
                from 0deg,
                #e74c3c 0deg 60deg,
                #3498db 60deg 120deg,
                #2ecc71 120deg 180deg,
                #f39c12 180deg 240deg,
                #9b59b6 240deg 300deg,
                #1abc9c 300deg 360deg
            );
        }

        .slice {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            pointer-events: none;
        }

        .slice:nth-child(1) {
            transform: rotate(0deg);
        }

        .slice:nth-child(2) {
            transform: rotate(60deg);
        }

        .slice:nth-child(3) {
            transform: rotate(120deg);
        }

        .slice:nth-child(4) {
            transform: rotate(180deg);
        }

        .slice:nth-child(5) {
            transform: rotate(240deg);
        }

        .slice:nth-child(6) {
            transform: rotate(300deg);
        }

        /* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á */
        .slice:nth-child(1) .slice-text {
            top: 30%;
            left: 70%;
            transform: translate(-50%, -50%) rotate(30deg);
        }

        .slice:nth-child(2) .slice-text {
            top: 30%;
            left: 70%;
            transform: translate(-50%, -50%) rotate(30deg);
        }

        .slice:nth-child(3) .slice-text {
            top: 30%;
            left: 70%;
            transform: translate(-50%, -50%) rotate(30deg);
        }

        .slice:nth-child(4) .slice-text {
            top: 30%;
            left: 70%;
            transform: translate(-50%, -50%) rotate(30deg);
        }

        .slice:nth-child(5) .slice-text {
            top: 30%;
            left: 70%;
            transform: translate(-50%, -50%) rotate(30deg);
        }

        .slice:nth-child(6) .slice-text {
            top: 30%;
            left: 70%;
            transform: translate(-50%, -50%) rotate(30deg);
        }

        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, #2c3e50, #34495e);
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }

        .pointer {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 30px solid #e74c3c;
            z-index: 10;
            filter: drop-shadow(0 3px 6px rgba(0,0,0,0.3));
        }

        .controls {
            margin-bottom: 2rem;
        }

        .spin-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .spin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.6);
        }

        .spin-btn:active {
            transform: translateY(0);
        }

        .spin-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .result {
            margin-top: 2rem;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .result h2 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #f39c12;
        }

        .result p {
            font-size: 1rem;
            line-height: 1.6;
        }

        .stats, .history {
            margin-top: 2rem;
            text-align: left;
        }

        .stats h3, .history h3 {
            margin-bottom: 10px;
            color: #f39c12;
        }

        .stat-item {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-bar {
            width: 60%;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            overflow: hidden;
        }

        .stat-fill {
            height: 100%;
            background: linear-gradient(45deg, #f39c12, #e67e22);
            transition: width 0.5s ease;
        }

        .history-item {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            border-left: 4px solid #f39c12;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f39c12;
            pointer-events: none;
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .slice-text {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: rotate(-30deg);
            text-align: center;
            padding: 10px;
        }

        @media (max-width: 768px) {
            .wheel-container {
                width: 300px;
                height: 300px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .slice {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ ‡∏Å‡∏á‡∏•‡πâ‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß</h1>
        
        <div class="wheel-container">
            <div class="pointer"></div>
            <div class="wheel" id="wheel">
                <div class="slice">
                    <div class="slice-text">üèñÔ∏è ‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï</div>
                </div>
                <div class="slice">
                    <div class="slice-text">üèùÔ∏è ‡πÄ‡∏Å‡∏≤‡∏∞‡∏™‡∏°‡∏∏‡∏¢</div>
                </div>
                <div class="slice">
                    <div class="slice-text">üèõÔ∏è ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</div>
                </div>
                <div class="slice">
                    <div class="slice-text">üåä ‡∏û‡∏±‡∏ó‡∏¢‡∏≤</div>
                </div>
                <div class="slice">
                    <div class="slice-text">üèûÔ∏è ‡πÄ‡∏Ç‡∏≤‡πÉ‡∏´‡∏ç‡πà</div>
                </div>
                <div class="slice">
                    <div class="slice-text">üõï ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤</div>
                </div>
            </div>
            <div class="center-circle"></div>
        </div>

        <div class="controls">
            <button class="spin-btn" id="spinBtn" onclick="spinWheel()">üé≤ ‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏á‡∏•‡πâ‡∏≠!</button>
        </div>

        <div class="result" id="result">
            <h2>üéØ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß!</h2>
            <p>‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏∞‡∏ï‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì</p>
        </div>

        <div class="stats">
            <h3>üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°</h3>
            <div id="statsDisplay">
                <p style="text-align: center; color: #bdc3c7;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</p>
            </div>
            <div style="margin-top: 15px;">
                <button class="spin-btn" onclick="testSpin(100)" style="font-size: 0.9rem; padding: 10px 20px;">üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö 100 ‡∏£‡∏≠‡∏ö</button>
                <button class="spin-btn" onclick="resetStats()" style="font-size: 0.9rem; padding: 10px 20px; background: linear-gradient(45deg, #95a5a6, #7f8c8d);">üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
            </div>
        </div>

        <div class="history">
            <h3>üìã ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô</h3>
            <div id="historyList">
                <p style="text-align: center; color: #bdc3c7;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô</p>
            </div>
        </div>
    </div>

    <script>
        const places = [
            {
                name: "‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï",
                emoji: "üèñÔ∏è",
                description: "‡πÄ‡∏Å‡∏≤‡∏∞‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÉ‡∏ô‡∏ó‡∏∞‡πÄ‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏≤‡∏°‡∏±‡∏ô ‡∏°‡∏µ‡∏´‡∏≤‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Ç‡∏≤‡∏ß‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏•‡πÉ‡∏™‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏°‡∏£‡∏Å‡∏ï ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ß‡∏û‡∏£‡∏∞‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏ï‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°"
            },
            {
                name: "‡πÄ‡∏Å‡∏≤‡∏∞‡∏™‡∏°‡∏∏‡∏¢",
                emoji: "üèùÔ∏è",
                description: "‡πÄ‡∏Å‡∏≤‡∏∞‡πÉ‡∏ô‡∏≠‡πà‡∏≤‡∏ß‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏≤‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Ç‡∏≤‡∏ß‡∏ô‡∏ß‡∏•‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏ô‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ä‡∏≠‡∏∏‡πà‡∏° ‡∏ö‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡∏™‡∏á‡∏ö‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô"
            },
            {
                name: "‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà",
                emoji: "üèõÔ∏è",
                description: "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ß‡∏±‡∏ü‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏•‡πâ‡∏≤‡∏ô‡∏ô‡∏≤ ‡∏°‡∏µ‡∏ß‡∏±‡∏î‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏Å‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° ‡∏ï‡∏•‡∏≤‡∏î‡∏Å‡∏¥‡∏ô-‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏Ñ‡∏∂‡∏Å‡∏Ñ‡∏±‡∏Å ‡πÅ‡∏•‡∏∞‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°"
            },
            {
                name: "‡∏û‡∏±‡∏ó‡∏¢‡∏≤",
                emoji: "üåä",
                description: "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡∏∏‡∏Å‡∏™‡∏ô‡∏≤‡∏ô‡∏£‡∏¥‡∏°‡∏ó‡∏∞‡πÄ‡∏• ‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏≤‡∏á‡∏ô‡πâ‡∏≥‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ ‡πÑ‡∏ô‡∏ï‡πå‡πÑ‡∏•‡∏ü‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ä‡∏µ‡∏ß‡∏≤ ‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà"
            },
            {
                name: "‡πÄ‡∏Ç‡∏≤‡πÉ‡∏´‡∏ç‡πà",
                emoji: "üèûÔ∏è",
                description: "‡∏≠‡∏∏‡∏ó‡∏¢‡∏≤‡∏ô‡πÅ‡∏´‡πà‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡πà‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ä‡∏≠‡∏∏‡πà‡∏° ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏¢‡πá‡∏ô‡∏™‡∏ö‡∏≤‡∏¢ ‡∏ô‡πâ‡∏≥‡∏ï‡∏Å‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° ‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏õ‡πà‡∏≤‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏ô‡∏¥‡∏î"
            },
            {
                name: "‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤",
                emoji: "üõï",
                description: "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÇ‡∏ö‡∏£‡∏≤‡∏ì‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏Å‡πà‡∏°‡∏£‡∏î‡∏Å‡πÇ‡∏•‡∏Å ‡∏°‡∏µ‡∏ã‡∏≤‡∏Å‡∏õ‡∏£‡∏±‡∏Å‡∏´‡∏±‡∏Å‡∏û‡∏±‡∏á‡∏ß‡∏±‡∏î‡πÇ‡∏ö‡∏£‡∏≤‡∏ì‡∏ó‡∏µ‡πà‡∏á‡∏î‡∏á‡∏≤‡∏° ‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏≠‡∏±‡∏ô‡∏¢‡∏≤‡∏ß‡∏ô‡∏≤‡∏ô"
            }
        ];

        let isSpinning = false;
        let history = [];
        let stats = {};

        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà
        const weights = [12, 12, 12, 12, 40, 12]; // ‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï, ‡πÄ‡∏Å‡∏≤‡∏∞‡∏™‡∏°‡∏∏‡∏¢, ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà, ‡∏û‡∏±‡∏ó‡∏¢‡∏≤, ‡πÄ‡∏Ç‡∏≤‡πÉ‡∏´‡∏ç‡πà, ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤
        
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
        places.forEach(place => {
            stats[place.name] = 0;
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å
        function weightedRandomSelect() {
            const totalWeight = weights.reduce((sum, weight) => sum + weight, 0);
            let random = Math.random() * totalWeight;
            
            for (let i = 0; i < weights.length; i++) {
                random -= weights[i];
                if (random <= 0) {
                    return i;
                }
            }
            return weights.length - 1; // fallback
        }

        function spinWheel() {
            if (isSpinning) return;
            
            isSpinning = true;
            const spinBtn = document.getElementById('spinBtn');
            const wheel = document.getElementById('wheel');
            
            spinBtn.disabled = true;
            spinBtn.textContent = 'üåÄ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏°‡∏∏‡∏ô...';

            // ‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏á‡∏®‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô (5-10 ‡∏£‡∏≠‡∏ö + ‡∏≠‡∏á‡∏®‡∏≤‡∏™‡∏∏‡πà‡∏°)
            const spins = Math.floor(Math.random() * 6) + 5; // 5-10 ‡∏£‡∏≠‡∏ö
            const randomDegree = Math.floor(Math.random() * 360);
            const totalDegree = (spins * 360) + randomDegree;

            wheel.style.transform = `rotate(${totalDegree}deg)`;

            // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á (‡∏à‡∏≥‡∏•‡∏≠‡∏á)
            playSpinSound();

            setTimeout(() => {
                // ‡πÉ‡∏ä‡πâ weighted random ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏≠‡∏á‡∏®‡∏≤
                const selectedIndex = weightedRandomSelect();
                const selectedPlace = places[selectedIndex];

                showResult(selectedPlace);
                addToHistory(selectedPlace);
                createConfetti();

                isSpinning = false;
                spinBtn.disabled = false;
                spinBtn.textContent = 'üé≤ ‡∏´‡∏°‡∏∏‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á!';
            }, 4000);
        }

        function showResult(place) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `
                <h2>üéâ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ${place.emoji} ${place.name}</h2>
                <p>${place.description}</p>
            `;
            
            // ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            playResultSound();
        }

        function addToHistory(place) {
            const now = new Date();
            const timeString = now.toLocaleTimeString('th-TH', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            history.unshift({
                place: place,
                time: timeString
            });

            // ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏Ñ‡πà 5 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
            if (history.length > 5) {
                history = history.slice(0, 5);
            }

            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
            stats[place.name]++;
            updateStatsDisplay();
            updateHistoryDisplay();
        }

        function updateStatsDisplay() {
            const statsDisplay = document.getElementById('statsDisplay');
            const totalSpins = Object.values(stats).reduce((sum, count) => sum + count, 0);
            
            if (totalSpins === 0) {
                statsDisplay.innerHTML = '<p style="text-align: center; color: #bdc3c7;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</p>';
                return;
            }

            const sortedStats = Object.entries(stats)
                .map(([name, count], index) => {
                    const percentage = ((count / totalSpins) * 100).toFixed(1);
                    const place = places.find(p => p.name === name);
                    const placeIndex = places.findIndex(p => p.name === name);
                    const expectedPercentage = weights[placeIndex];
                    return { name, count, percentage, emoji: place.emoji, expected: expectedPercentage };
                })
                .sort((a, b) => b.count - a.count);

            statsDisplay.innerHTML = `
                <div style="margin-bottom: 15px; text-align: center;">
                    <strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${totalSpins} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</strong><br>
                    <small>üèûÔ∏è ‡πÄ‡∏Ç‡∏≤‡πÉ‡∏´‡∏ç‡πà: 40% | ‡∏≠‡∏∑‡πà‡∏ô‡πÜ: 12% ‡∏ï‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</small>
                </div>
                ${sortedStats.map(item => `
                    <div class="stat-item">
                        <span><strong>${item.emoji} ${item.name}</strong></span>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div class="stat-bar">
                                <div class="stat-fill" style="width: ${Math.min(item.percentage * 2.5, 100)}%"></div>
                            </div>
                            <span>${item.count} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (${item.percentage}% | ‡πÄ‡∏õ‡πâ‡∏≤ ${item.expected}%)</span>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function testSpin(rounds) {
            if (isSpinning) return;
            
            const originalSpinning = isSpinning;
            isSpinning = true;
            
            for (let i = 0; i < rounds; i++) {
                // ‡πÉ‡∏ä‡πâ weighted random selection
                const selectedIndex = weightedRandomSelect();
                const selectedPlace = places[selectedIndex];
                stats[selectedPlace.name]++;
            }
            
            updateStatsDisplay();
            isSpinning = originalSpinning;
        }

        function resetStats() {
            places.forEach(place => {
                stats[place.name] = 0;
            });
            updateStatsDisplay();
        }

        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            
            if (history.length === 0) {
                historyList.innerHTML = '<p style="text-align: center; color: #bdc3c7;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô</p>';
                return;
            }

            historyList.innerHTML = history.map(item => `
                <div class="history-item">
                    <strong>${item.place.emoji} ${item.place.name}</strong> - ${item.time}
                </div>
            `).join('');
        }

        function createConfetti() {
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA726', '#AB47BC', '#66BB6A'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    document.body.appendChild(confetti);

                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 50);
            }
        }

        function playSpinSound() {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ú‡πà‡∏≤‡∏ô Web Audio API (‡∏à‡∏≥‡∏•‡∏≠‡∏á)
            if (typeof(AudioContext) !== "undefined" || typeof(webkitAudioContext) !== "undefined") {
                const audioContext = new (AudioContext || webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.1);
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.1);
            }
        }

        function playResultSound() {
            // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            if (typeof(AudioContext) !== "undefined" || typeof(webkitAudioContext) !== "undefined") {
                const audioContext = new (AudioContext || webkitAudioContext)();
                
                // ‡πÄ‡∏•‡πà‡∏ô‡πÇ‡∏ô‡πâ‡∏ï‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡∏™‡∏±‡πâ‡∏ô‡πÜ
                const notes = [262, 330, 392]; // C, E, G
                notes.forEach((freq, index) => {
                    setTimeout(() => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        
                        oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                        
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.3);
                    }, index * 100);
                });
            }
        }

        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå hover ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏á‡∏•‡πâ‡∏≠
        document.getElementById('wheel').addEventListener('mouseenter', function() {
            if (!isSpinning) {
                this.style.transform += ' scale(1.05)';
            }
        });

        document.getElementById('wheel').addEventListener('mouseleave', function() {
            if (!isSpinning) {
                this.style.transform = this.style.transform.replace(' scale(1.05)', '');
            }
        });
    </script>
</body>
</html>
